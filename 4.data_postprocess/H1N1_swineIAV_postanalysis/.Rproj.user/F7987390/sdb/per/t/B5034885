{
    "collab_server" : "",
    "contents" : "library(tidyverse)\n\n#load data header\nflu_data <- read.csv(\"dataset/header_MoiseH1N12017-18swineIAV.FASTA\", header = FALSE, stringsAsFactors = FALSE, sep = \"|\")\n\nwrite.csv(flu_data$V4, \"proteinsegment.txt\")\n#check duplicates\nn_occur <- data.frame(table(flu_data$V3))\nduplicate_record <- n_occur[n_occur$Freq > 1,]\nduplicate_list <- duplicate_record %>% mutate(header = Var1) %>%\n  separate(header, into = c(\"subtype\", \"host\", \"area\",\"id\",\"year\"), sep = \"/\", extra = \"merge\")\nwrite.csv(duplicate_list$id, \"wanted_seq.txt\")\n\n\n#identify potential strains\n\n#load again cleaned data header\nstrain_data <- read.csv(\"dataset/straininfo_classI_v2.csv\", header = FALSE, stringsAsFactors = FALSE, sep = \",\")\nwanted <- strain_data %>% mutate(header = V2) %>% separate(header, into = c(\"ID\", \"strain_name\", \"segment\"),\n                                                           sep = \"-\", extra = \"merge\")\nwanted <- wanted %>% mutate(header = strain_name) %>% separate(header, into = c(\"subtype\", \"host\", \"area\",\"id\",\"year\"),\n                                                           sep = \"_\", extra = \"merge\") %>%\n  filter(area != \"NORTH\")\nn_occur <- data.frame(table(wanted$id))\nduplicate_record <- n_occur[n_occur$Freq > 1,]\n\nnorthcarolina <- strain_data %>% mutate(header = V2) %>% separate(header, into = c(\"ID\", \"strain_name\", \"segment\"),\n                                                           sep = \"-\", extra = \"merge\")\nnorthcarolina <- northcarolina %>% mutate(header = strain_name) %>% separate(header, into = c(\"subtype\", \"host\", \"area\",\"area2\",\"id\"),\n                                                                  sep = \"_\", extra = \"merge\") %>%\n  filter(area == \"NORTH\")\nnorthcarolina <- northcarolina %>% separate(id, into = c(\"id\", \"year\"))\nn_occur_nc <- data.frame(table(northcarolina$id))\nduplicate_record_nc <- n_occur_nc[n_occur_nc$Freq > 1,]\n\nseq <- rbind(duplicate_record,duplicate_record_nc)\nseq$Var1 <- factor(seq$Var1, levels = seq$Var1[order(-seq$Freq)])\n\nggplot(seq, aes(x = Var1, y = Freq)) + \n  geom_bar(stat = \"identity\") + theme_classic() +\n  theme(legend.position = \"right\") +\n  labs(title = \"Number of Strains Hits \\n (Class I)\", \n       x = \"Strains\", y = \"Count (n)\") +\n  theme(plot.title = element_text(hjust = 0.5, size = 14)) + \n  theme(axis.text.x = element_text(angle = 68, hjust = 1, size = 7)) +\n  theme(axis.text.y = element_text(size = 9))\nwrite.csv(seq, \"janusranking_classI_all.csv\")\n\n#load again cleaned data header\nstrain_data_clsII <- read.csv(\"dataset/straininfo_classII_v2.csv\", header = FALSE, stringsAsFactors = FALSE, sep = \",\")\nwanted_clsII <- strain_data_clsII %>% mutate(header = V2) %>% separate(header, into = c(\"ID\", \"strain_name\", \"segment\"),\n                                                           sep = \"-\", extra = \"merge\")\nwanted_clsII <- wanted_clsII %>% mutate(header = strain_name) %>% separate(header, into = c(\"subtype\", \"host\", \"area\", \"id\", \"year\"),\n                                                           sep = \"_\", extra = \"merge\") %>%\n  filter(area != \"NORTH\")\nn_occur_clsII <- data.frame(table(wanted_clsII$id))\nduplicate_record_clsII <- n_occur_clsII[n_occur_clsII$Freq > 1,]\n\nnorthcarolina_clsII <- strain_data_clsII %>% mutate(header = V2) %>% separate(header, into = c(\"ID\", \"strain_name\", \"segment\"),\n                                                                  sep = \"-\", extra = \"merge\")\nnorthcarolina_clsII <- northcarolina_clsII %>% mutate(header = strain_name) %>% separate(header, into = c(\"subtype\", \"host\", \"area\", \"area2\", \"id\"),\n                                                                           sep = \"_\", extra = \"merge\") %>%\n  filter(area == \"NORTH\")\nnorthcarolina_clsII <- northcarolina_clsII %>% separate(id, into = c(\"id\", \"year\"))\nn_occur_nc_clsII <- data.frame(table(northcarolina_clsII$id))\nduplicate_record_nc_clssII <- n_occur_nc_clsII[n_occur_nc_clsII$Freq > 1,]\n\nseq_clsII <- rbind(duplicate_record_clsII, duplicate_record_nc_clssII)\nseq_clsII$Var1 <- factor(seq_clsII$Var1, levels = seq_clsII$Var1[order(-seq_clsII$Freq)])\n\nggplot(seq_clsII, aes(x = Var1, y = Freq)) + \n  geom_bar(stat = \"identity\") + theme_classic() +\n  theme(legend.position = \"right\") +\n  labs(title = \"Number of Strains Hits \\n (Class II)\", \n       x = \"Strains\", y = \"Count (n)\") +\n  theme(plot.title = element_text(hjust = 0.5, size = 14)) + \n  theme(axis.text.x = element_text(angle = 68, hjust = 1, size = 7)) +\n  theme(axis.text.y = element_text(size = 9)) \nwrite.csv(seq_clsII, \"janusranking_classII_all.csv\")\n\nepicctop10_clsI <- read.csv(\"dataset/epicctop10_Class I.csv\", header = FALSE, stringsAsFactors = FALSE, sep = \"-\")\n#epicctop10_moreinfo <- epicctop10 %>% mutate(header = V1) %>% separate(header, into = c(\"subtype\", \"host\", \"area\",\"id\",\"year\"),\n#                                                  sep = \"_\", extra = \"merge\")\n# unique(epicctop10_moreinfo$area)\n# unique(epicctop10_moreinfo$id)\n# #check duplicates\nn_occur <- data.frame(table(epicctop10_clsI$V2))\nduplicate_record_clsI <- n_occur[n_occur$Freq > 1,]\nwrite.csv(duplicate_record, \"epicc_top10_classI.csv\")\n\nepicctop10_clsII <- read.csv(\"dataset/epicctop10_Class II.csv\", header = FALSE, stringsAsFactors = FALSE, sep = \"-\")\nn_occur <- data.frame(table(epicctop10_clsII$V2))\nduplicate_record_clsII <- n_occur[n_occur$Freq > 1,]\nwrite.csv(duplicate_record, \"epicc_top10_classII.csv\")\nunique(epicctop10_clsII$V2)\n\nconsensusI <- read.csv(\"dataset/epicandjanus_Class I.csv\", header = FALSE, stringsAsFactors = FALSE, sep = \"|\")\n#check duplicates\nn_occur <- data.frame(table(consensusI$V1))\nduplicate_record <- n_occur[n_occur$Freq > 1,]\n\nconsensusII <- read.csv(\"dataset/epicandjanus_Class II.csv\", header = FALSE, stringsAsFactors = FALSE, sep = \"|\")\nn_occur <- data.frame(table(consensusII$V1))\nduplicate_record <- n_occur[n_occur$Freq > 1,]\n\n\n\n",
    "created" : 1524059271915.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1984103280",
    "id" : "B5034885",
    "lastKnownWriteTime" : 1524681810,
    "last_content_update" : 1524681810160,
    "path" : "/Volumes/TOSHIBA/Research/10. SwineFluEpitopes/EpiCCAnalysis/scripts/data_precheck.r",
    "project_path" : "scripts/data_precheck.r",
    "properties" : {
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}